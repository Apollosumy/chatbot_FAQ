ü§ñ Telegram –ß–∞—Ç-–±–æ—Ç –Ω–∞ Django + Aiogram + OpenAI
üìå –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É
–¶–µ–π Telegram-–±–æ—Ç –¥–æ–∑–≤–æ–ª—è—î —à—É–∫–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö —ñ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –¥–æ–¥–∞–Ω–∏–º–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è–º–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏.
–î–ª—è –ø–æ—à—É–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≥—ñ–±—Ä–∏–¥–Ω–∏–π –º–µ—Ç–æ–¥ ‚Äì –ø–æ—î–¥–Ω–∞–Ω–Ω—è BM25 (—Ç–µ–∫—Å—Ç–æ–≤–∞ —Å—Ö–æ–∂—ñ—Å—Ç—å) —Ç–∞ OpenAI Embeddings (—Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫).

üîπ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
‚úÖ –ü–æ—à—É–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —É –±–∞–∑—ñ –∑–Ω–∞–Ω—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é BM25 —Ç–∞ OpenAI Embeddings
‚úÖ –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ aiogram
‚úÖ Django-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Ç–∞–Ω—å —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ –ø–æ—à—É–∫—É
‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É: –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É—Å—ñ –∑–∞–ø–∏—Ç–∏, —Å—Ö–æ–∂—ñ—Å—Ç—å —Ç–∞ –∑–Ω–∞–π–¥–µ–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–µ–≤—ñ–¥–æ–º–∏—Ö –ø–∏—Ç–∞–Ω—å —É –±–∞–∑—É UnansweredQuestion –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
‚úÖ –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Django –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω—å
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ Faker (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç
üîπ 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
sh
–ö–æ–ø—ñ—é–≤–∞—Ç–∏
–†–µ–¥–∞–≥—É–≤–∞—Ç–∏
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—è —É –ø–æ—Ç—Ä—ñ–±–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó  
git clone <URL_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Æ>  
cd chat_bot  
üîπ 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (Poetry)

poetry install  # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π  
poetry shell    # –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞  
üîπ 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è (.env)
–°—Ç–≤–æ—Ä—ñ—Ç—å .env —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó (chat_bot/) —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

OPENAI_API_KEY=your_openai_api_key  
TELEGRAM_BOT_TOKEN=your_telegram_bot_token  
DATABASE_URL=postgres://user:password@localhost:5432/chatbot_db  
üîπ 4. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

python manage.py migrate  # –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π  
python manage.py createsuperuser  # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞  

üîπ 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É Django

python manage.py runserver  
üîπ 6. –ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞

python bot/bot.py  
üìä –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–Ω–µ–ª—å
–©–æ–± —É–≤—ñ–π—Ç–∏ –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å Django, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
http://127.0.0.1:8000/admin/

üîπ –§—É–Ω–∫—Ü—ñ—ó –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ:
‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Ç–∞–Ω—å —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (QAEntry)
‚úÖ –ü–µ—Ä–µ–≥–ª—è–¥ –ø–∏—Ç–∞–Ω—å, –Ω–∞ —è–∫—ñ –±–æ—Ç –Ω–µ –∑–º—ñ–≥ –∑–Ω–∞–π—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (UnansweredQuestion)
‚úÖ –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤
‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø–æ—à—É–∫—É

üõ† –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ –ø–æ—à—É–∫—É
1Ô∏è‚É£ –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—à—É–∫—É
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –ø–∏—Ç–∞–Ω–Ω—è —É Telegram-–±–æ—Ç.
BM25 –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–æ–ø-3 –Ω–∞–π–±—ñ–ª—å—à —Å—Ö–æ–∂—ñ –ø–∏—Ç–∞–Ω–Ω—è –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ —Ç–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ—é —Å—Ö–æ–∂—ñ—Å—Ç—é.
–í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ OpenAI Embeddings, —è–∫–∞ –ø–æ—Ä—ñ–≤–Ω—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∏—Ç–∞–Ω–Ω—è —ñ–∑ –≤–µ–∫—Ç–æ—Ä–Ω–∏–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è–º–∏ –≤ –±–∞–∑—ñ.
–Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–≤–∏—â—É—î –ø–æ—Ä—ñ–≥ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 0.6) ‚Äì –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
–Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äì –ø–∏—Ç–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É UnansweredQuestion –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
üìù –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω—å, –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —Ç–∞ —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤
1Ô∏è‚É£ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å—É
–ö–æ–∂–µ–Ω –∑–∞–ø–∏—Å —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —Ç–∞–∫–∏—Ö –ø–æ–ª—ñ–≤:

–ü–∏—Ç–∞–Ω–Ω—è ‚Äì –≥–æ–ª–æ–≤–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
–°–∏–Ω–æ–Ω—ñ–º–∏ ‚Äì –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è –ø–∏—Ç–∞–Ω–Ω—è, —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ ";".
–í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äì —Ç–µ–∫—Å—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —è–∫—É –Ω–∞–¥–∞—î –±–æ—Ç.
Embedding ‚Äì –≤–µ–∫—Ç–æ—Ä–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –ø–∏—Ç–∞–Ω–Ω—è (–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ).
2Ô∏è‚É£ –í–∏–º–æ–≥–∏ –¥–æ —Å–∏–Ω–æ–Ω—ñ–º—ñ–≤
‚úÖ –§–æ—Ä–º–∞—Ç:

–°–∏–Ω–æ–Ω—ñ–º–∏ –≤–≤–æ–¥—è—Ç—å—Å—è —á–µ—Ä–µ–∑ ";" –±–µ–∑ –ø—Ä–æ–±—ñ–ª—ñ–≤ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —ñ –≤ –∫—ñ–Ω—Ü—ñ:
–ß–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ø–∞—Å–ø–æ—Ä—Ç?; –Ø–∫—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ?; –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —â–æ—Å—å –º–∞—Ç–∏ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ?
–ù–µ –∑–∞–ª–∏—à–∞—Ç–∏ ";" –≤ –∫—ñ–Ω—Ü—ñ, —è–∫—â–æ –Ω–µ–º–∞—î –±—ñ–ª—å—à–µ —Å–ª—ñ–≤.
‚úÖ –Ø–∫—ñ —Å–∏–Ω–æ–Ω—ñ–º–∏ –¥–æ–¥–∞–≤–∞—Ç–∏?:

–†—ñ–∑–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è
–ü–æ—à–∏—Ä–µ–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
–°–∏–Ω–æ–Ω—ñ–º—ñ—á–Ω—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
‚ùå –©–æ –Ω–µ –≤–∞—Ä—Ç–æ –¥–æ–¥–∞–≤–∞—Ç–∏:

–ó–∞–ø–∏—Ç–∏, —è–∫—ñ –º–∞—é—Ç—å —ñ–Ω—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è
–î—É–∂–µ –∑–∞–≥–∞–ª—å–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è
